import{Subscription as e,isObservable as t,fromEvent as s}from"rxjs";import{isFunction as r,isNullOrUndef as i,isBoolean as o,isString as c}from"../../shared/utils/index.min.js";import{map as n}from"rxjs/operators";const a=(e,s,r)=>{Object.entries(e).forEach(([e,i])=>{const o=(e.includes("-"),e);t(i)?r.add(i.subscribe(e=>{s.style[o]=e})):s.style[o]=i})},b=(e,t)=>(e,s)=>{const r="class"===e?"className":e;"className"===r?i(s)?t.className="":t.className=String(s):i(s)?t.removeAttribute(r):o(s)?s?t.setAttribute(r,r):t.removeAttribute(r):t.setAttribute(r,String(s))};function l(o,l){const u=new e;var m,d,p,f;return o.props&&Object.entries(o.props).forEach((m=((e,s,r)=>(e,o)=>{t(o)?r.add(o.subscribe(e=>{c(e)?s.setAttribute("style",e):i(e)?s.removeAttribute("style"):a(e,s,r)})):c(o)?s.setAttribute("style",o):i(o)||a(o,s,r)})(0,l,u),d=((e,t,r)=>(i,o)=>{if((e=>e.startsWith("on"))(i))if(((e,t)=>e.endsWith("$"))(i)){const c=i.substr(0,i.length-1),a=c.slice(2).toLocaleLowerCase(),b=n(e=>Object.assign({element:t},e))(s(t,a));r.add(o(b).subscribe(t=>{e.props[c]&&e.props[c](t)}))}else{if(e.props[i+"$"])return;const c=i.slice(2).toLocaleLowerCase(),a=n(e=>Object.assign({element:t},e))(s(t,c));r.add(a.subscribe(e=>o(e)))}})(o,l,u),p=((e,t,s)=>(e,r)=>{s.add(r.subscribe(s=>{b(0,t)(e,s)}))})(0,l,u),f=b(0,l),([e,s])=>{if(!(e=>"children"===e||"key"===e||"ref"===e)(e))return((e,t)=>"style"===e)(e)?m(e,s):r(s)?d(e,s):t(s)?p(e,s):f(e,s)})),u}export{l as connectElementProps};
